{% extends "layout.html" %}

{% block content %}

	 <script>
	 	var currentRegion;
	 	var data = {
	 	    "Medulla": 
	 	   {"q1_1": "Pons",
	 		"q1_2": "Medulla",
	 		 "q1_3": "Mamillary Body",
	 		 "q2_1": "Regulates breathing and blood circulation",
	 		 "q2_2": "Regulates motor movements",
	 		 "q2_3": "Stores episodic memories",
	 		 "q1_ans": "2",
	 		 "q2_ans": "1"},

	 	    "Pons": 
	 	    {"q1_1": "Pons",
	 		"q1_2": "Optic Chiasm",
	 		 "q1_3": "Arbor Vitae",
	 		 "q2_1": "Produces, transports, and removes cerebrospinal fluid",
	 		 "q2_2": "Connects the third and fourth ventricles to transport cerebrospinal fluid",
	 		 "q2_3": "Involved in breathing and feeling certain sensations",
	 		 "q1_ans": "1",
	 		 "q2_ans": "3"},

	 	    
	 	    "Midbrain": 
	 	    {"q1_1": "Habenula",
	 		"q1_2": "Massa Intermedia",
	 		 "q1_3": "Midbrain",
	 		 "q2_1": "Important to motor movement and auditory and visual processing",
	 		 "q2_2": "Regulates motor movements",
	 		 "q2_3": "Negative feedback processing",
	 		 "q1_ans": "3",
	 		 "q2_ans": "1"},


	 	    "Mamillary Body": 
	 	       {"q1_1": "Mamillary Body",
	 		"q1_2": "Arbor Vitae",
	 		 "q1_3": "Septal Nuclei",
	 		 "q2_1": "Receives and processes auditory information",
	 		 "q2_2": "Involved in the experience of pleasure",
	 		 "q2_3": "Recollective memory",
	 		 "q1_ans": "1",
	 		 "q2_ans": "3"},

	 	    "Habenula": 
	 	       {"q1_1": "Habenula",
	 		"q1_2": "Hypothalamus",
	 		 "q1_3": "Mamillary Body",
	 		 "q2_1": "Negative feedback processing",
	 		 "q2_2": "Receives and processes sensory info directly from the eyes",
	 		 "q2_3": "Regulates motor movements",
	 		 "q1_ans": "1",
	 		 "q2_ans": "1"},

	 	    "Temporal Lobe (inferior surface)": 
	 	       {"q1_1": "Pons",
	 		"q1_2": "Temporal Lobe",
	 		 "q1_3": "Subcallosal Gyrus",
	 		 "q2_1": "Visual memory, language comprehension, sound processing, and emotion",
	 		 "q2_2": "Stores episodic memories",
	 		 "q2_3": "Produces, transports, and removes cerebrospinal fluid",
	 		 "q1_ans": "2",
	 		 "q2_ans": "1"},

	 	    "Hypothalamus": 
	 	       {"q1_1": "Pituitary Gland",
	 		"q1_2": "Hypothalamus",
	 		 "q1_3": "Temporal Lobe",
	 		 "q2_1": "Keeps the body in homeostasis and controls the release of hormones",
	 		 "q2_2": "Passageway for cerebrospinal fluid",
	 		 "q2_3": "Connects the third and fourth ventricles to transport cerebrospinal fluid",
	 		 "q1_ans": "2",
	 		 "q2_ans": "1"},

	 	    "Subcallosal Gyrus": 
	 	       {"q1_1": "Septal Nuclei",
	 		"q1_2": "Fornix",
	 		 "q1_3": "Subcallosal Gyrus",
	 		 "q2_1": "Receives and processes sensory info directly from the eyes",
	 		 "q2_2": "Fine motor control of repetitive tasks",
	 		 "q2_3": "Involved in processing emotions and behavior regulation",
	 		 "q1_ans": "3",
	 		 "q2_ans": "3"},

	 	    "Optic Chiasm": 
	 	       {"q1_1": "Subcallosal Gyrus",
	 		"q1_2": "Visual Cortex",
	 		 "q1_3": "Optic Chiasm",
	 		 "q2_1": "Passageway for cerebrospinal fluid",
	 		 "q2_2": "Produces, transports, and removes cerebrospinal fluid",
	 		 "q2_3": "Involved in binocular vision and hand-eye coordination",
	 		 "q1_ans": "3",
	 		 "q2_ans": "3"},

	 	    "Pituitary Gland": 
	 	       {"q1_1": "Pituitary Gland",
	 		"q1_2": "Septal Nuclei",
	 		 "q1_3": "Septum Pellucidum",
	 		 "q2_1": "Connects the left and right halves of the thalamus",
	 		 "q2_2": "Secretes hormones",
	 		 "q2_3": "Fine motor control of repetitive tasks",
	 		 "q1_ans": "1",
	 		 "q2_ans": "2"},

	 	    "Septal Nuclei": 
	 	       {"q1_1": "Septum Pellucidum",
	 		"q1_2": "Septal Nuclei",
	 		 "q1_3": "Optic Chiasm",
	 		 "q2_1": "Involved in the experience of pleasure",
	 		 "q2_2": "Takes in sensory input to create an understanding ",
	 		 "q2_3": "Involved in complex cognitive behavior and personality expression",
	 		 "q1_ans": "2",
	 		 "q2_ans": "1"},

	 	    "Fornix": 
	 	       {"q1_1": "Fornix",
	 		"q1_2": "Septum Pellucidum",
	 		 "q1_3": "Pituitary Gland",
	 		 "q2_1": "Separates the left and right ventricles of the brain",
	 		 "q2_2": "Involved in the experience of pleasure",
	 		 "q2_3": "Primary transmitter of output of the hippocampus",
	 		 "q1_ans": "1",
	 		 "q2_ans": "3"},

	 	    "Corpus Callosum": 
	 	       {"q1_1": "Subcallosal Gyrus",
	 		"q1_2": "Corpus Callosum",
	 		 "q1_3": "Optic Chiasm",
	 		 "q2_1": "Primary transmitter of output of the hippocampus",
	 		 "q2_2": "It connects the left and right hemispheres of the brain",
	 		 "q2_3": "Fine motor control of repetitive tasks",
	 		 "q1_ans": "2",
	 		 "q2_ans": "2"},

	 	    "Prefrontal Cortex": 
	 	       {"q1_1": "Prefrontal Cortex",
	 		"q1_2": "Hypothalamus",
	 		 "q1_3": "Motor Association Area",
	 		 "q2_1": "Carries sensory and motor information",
	 		 "q2_2": "Takes in sensory input to create an understanding ",
	 		 "q2_3": "Involved in complex cognitive behavior and personality expression",
	 		 "q1_ans": "1",
	 		 "q2_ans": "3"},

	 	    "Septum Pellucidum": 
	 	       {"q1_1": "Septum Pellucidum",
	 		"q1_2": "Optic Chiasm",
	 		 "q1_3": "Fornix",
	 		 "q2_1": "Connects the left and right halves of the thalamus",
	 		 "q2_2": "Recollective memory",
	 		 "q2_3": "Separates the left and right ventricles of the brain ",
	 		 "q1_ans": "1",
	 		 "q2_ans": "3"},

	 	    "Massa Intermedia": 
	 	       {"q1_1": "Motor Association Area",
	 		"q1_2": "Massa Intermedia",
	 		 "q1_3": "Midbrain",
	 		 "q2_1": "Negative feedback processing",
	 		 "q2_2": "Fine motor control of repetitive tasks",
	 		 "q2_3": "Connects the left and right halves of the thalamus",
	 		 "q1_ans": "2",
	 		 "q2_ans": "3"},

	 	    "Motor Association Area": 
	 	       {"q1_1": "Premotor Cortex",
	 		"q1_2": "Primary Motor Cortex",
	 		 "q1_3": "Motor Association Area",
	 		 "q2_1": "Passageway for cerebrospinal fluid",
	 		 "q2_2": "Carries sensory and motor information",
	 		 "q2_3": "Fine motor control of repetitive tasks",
	 		 "q1_ans": "3",
	 		 "q2_ans": "3"},

	 	    "Premotor Cortex": 
	 	       {"q1_1": "Pituitary Gland",
	 		"q1_2": "Premotor Cortex",
	 		 "q1_3": "Motor Association Area",
	 		 "q2_1": "Fine motor control of repetitive tasks",
	 		 "q2_2": "Primary transmitter of output of the hippocampus",
	 		 "q2_3": "Regulate behavior and processes emotions",
	 		 "q1_ans": "2",
	 		 "q2_ans": "1"},

	 	    "Primary Motor Cortex": 
	 	       {"q1_1": "Cerebellum",
	 		"q1_2": "Primary Motor Cortex",
	 		 "q1_3": "Medulla",
	 		 "q2_1": "Produces and regulates melatonin",
	 		 "q2_2": "Execution of movement throughout the body",
	 		 "q2_3": "Fine motor control of repetitive tasks",
	 		 "q1_ans": "2",
	 		 "q2_ans": "2"},

	 	    "Primary Somatosensory Cortex": 
	 	       {"q1_1": "Primary Somatosensory Cortex",
	 		"q1_2": "Somatosensory Association Area",
	 		 "q1_3": "Medulla",
	 		 "q2_1": "Keeps the body in homeostasis and controls the release of hormones",
	 		 "q2_2": "Involved in processing emotions and behavior regulation",
	 		 "q2_3": "Processes raw somatic sensations",
	 		 "q1_ans": "1",
	 		 "q2_ans": "3"},

	 	    "Somatosensory Association Area": 
	 	       {"q1_1": "Cingulate Gyrus",
	 		"q1_2": "Somatosensory Association Area",
	 		 "q1_3": "Temporal Lobe",
	 		 "q2_1": "Regulates behavior and processes emotions",
	 		 "q2_2": "Takes in sensory input to create an understanding",
	 		 "q2_3": "Produces and regulates melatonin",
	 		 "q1_ans": "2",
	 		 "q2_ans": "2"},

	 	    "Cuneus": 
	 	       {"q1_1": "Primary Motor Cortex",
	 		"q1_2": "Optic Chiasm",
	 		 "q1_3": "Cuneus",
	 		 "q2_1": "Recollective memory",
	 		 "q2_2": "Complex visual processing",
	 		 "q2_3": "Involved in breathing and feeling certain sensations",
	 		 "q1_ans": "3",
	 		 "q2_ans": "2"},

	 	    "Cingulate Gyrus": 
	 	       {"q1_1": "Visual Association Area",
	 		"q1_2": "Cingulate Gyrus",
	 		 "q1_3": "Pons",
	 		 "q2_1": "Visual memory, language comprehension, sound processing, and emotion",
	 		 "q2_2": "Regulates breathing and blood circulation",
	 		 "q2_3": "Regulates behavior and processes emotions",
	 		 "q1_ans": "2",
	 		 "q2_ans": "3"},

	 	    "Visual Association Area": 
	 	       {"q1_1": "Cuneus",
	 		"q1_2": "Superior Colliculus",
	 		 "q1_3": "Visual Association Area",
	 		 "q2_1": "Involved in binocular vision and hand-eye coordination",
	 		 "q2_2": "Basic visual processing",
	 		 "q2_3": "Execution of movement throughout the body",
	 		 "q1_ans": "3",
	 		 "q2_ans": "2"},

	 	    "Third Ventricle": 
	 	       {"q1_1": "Third Ventricle",
	 		"q1_2": "Septum Pellucidum",
	 		 "q1_3": "Visual Cortex",
	 		 "q2_1": "Produces, transports, and removes cerebrospinal fluid",
	 		 "q2_2": "It connects the left and right hemispheres of the brain",
	 		 "q2_3": "Secretes hormones",
	 		 "q1_ans": "1",
	 		 "q2_ans": "1"},

	 	    "Pineal Gland": 
	 	       {"q1_1": "Pineal Gland",
	 		"q1_2": "Fourth Ventricle",
	 		 "q1_3": "Pons",
	 		 "q2_1": "Primary transmitter of output of the hippocampus",
	 		 "q2_2": "Involved in complex cognitive behavior and personality expression",
	 		 "q2_3": "Produces and regulates melatonin",
	 		 "q1_ans": "1",
	 		 "q2_ans": "3"},

	 	    "Superior Colliculus": 
	 	       {"q1_1": "Somatosensory Association Area",
	 		"q1_2": "Cerebellum",
	 		 "q1_3": "Superior Colliculus",
	 		 "q2_1": "Orients eye movements ",
	 		 "q2_2": "Fine motor control of repetitive tasks",
	 		 "q2_3": "Processes raw somatic sensations",
	 		 "q1_ans": "3",
	 		 "q2_ans": "1"},

	 	    "Inferior Colliculus": 
	 	       {"q1_1": "Pineal Gland",
	 		"q1_2": "Inferior Colliculus",
	 		 "q1_3": "Orients eye movements ",
	 		 "q2_1": "Receives and processes auditory information",
	 		 "q2_2": "Complex visual processing",
	 		 "q2_3": "Fine motor control of repetitive tasks",
	 		 "q1_ans": "2",
	 		 "q2_ans": "1"},

	 	    "Cerebral Aqueduct": 
	 	       {"q1_1": "Pituitary Gland",
	 		"q1_2": "Third Ventricle",
	 		 "q1_3": "Cerebral Aqueduct",
	 		 "q2_1": "Connects the third and fourth ventricles to transport cerebrospinal fluid",
	 		 "q2_2": "Basic visual processing",
	 		 "q2_3": "Separates the left and right ventricles of the brain ",
	 		 "q1_ans": "3",
	 		 "q2_ans": "1"},


	 	    "Cerebellum": 
	 	       {"q1_1": "Habenula",
	 		"q1_2": "Cerebellum",
	 		 "q1_3": "Superior Colliculus",
	 		 "q2_1": "Regulates motor movements",
	 		 "q2_2": "Complex visual processing",
	 		 "q2_3": "Involved in binocular vision and hand-eye coordination",
	 		 "q1_ans": "2",
	 		 "q2_ans": "1"},

	 	    "Arbor Vitae": 
	 	       {"q1_1": "Arbor Vitae",
	 		"q1_2": "Central Canal",
	 		 "q1_3": "Inferior Colliculus",
	 		 "q2_1": "Regulates breathing and blood circulation",
	 		 "q2_2": "Secretes hormones",
	 		 "q2_3": "Carries sensory and motor information",
	 		 "q1_ans": "1",
	 		 "q2_ans": "3"},

	 	    "Fourth Ventricle": 
	 	       {"q1_1": "Third Ventricle",
	 		"q1_2": "Fourth Ventricle",
	 		 "q1_3": "Arbor Vitae",
	 		 "q2_1": "It connects the left and right hemispheres of the brain",
	 		 "q2_2": "Keeps the body in homeostasis and controls the release of hormones",
	 		 "q2_3": "Produces, transports, and removes cerebrospinal fluid",
	 		 "q1_ans": "2",
	 		 "q2_ans": "3"},

	 	    "Visual Cortex": 
	 	       {"q1_1": "Inferior Colliculus",
	 		"q1_2": "Visual Cortex",
	 		 "q1_3": "Somatosensory Association Area",
	 		 "q2_1": "Receives and processes sensory info directly from the eyes",
	 		 "q2_2": "Processes raw somatic sensations",
	 		 "q2_3": "Receives and processes auditory information",
	 		 "q1_ans": "2",
	 		 "q2_ans": "1"},

	 	    "Central Canal": 
	 	    {"q1_1": "Medulla",
	 		"q1_2": "Mamillary Body",
	 		 "q1_3": "Central Canal",
	 		 "q2_1": "Visual memory, language comprehension, sound processing, and emotion",
	 		 "q2_2": "Passageway for cerebrospinal fluid",
	 		 "q2_3": "Involved in processing emotions and behavior regulation",
	 		 "q1_ans": "3",
	 		 "q2_ans": "2"},
	 	}

	 	var quizQuestionsHTML = '<p id="quiz-q1">What is this the name of the selected region?</p><div id="quiz-q1-1-div" class="quiz-div"><input class="q1" type="radio" id="quiz-q1-1" name="q1" ><label id="quiz-q1-1-label" for= "quiz-q1-1"></label></div><div id="quiz-q1-2-div" class="quiz-div"><input class="q1" type="radio" id="quiz-q1-2"  name="q1" ><label id="quiz-q1-2-label" for= "quiz-q1-2"></label></div><div id="quiz-q1-3-div" class="quiz-div"><input class="q1" type="radio" id="quiz-q1-3" name="q1" ><label id="quiz-q1-3-label" for= "quiz-q1-3"></label></div><p id="quiz-q2">What is this the function of the selected region?</p>  <div id="quiz-q2-1-div" class="quiz-div"><input class="q2" type="radio" id="quiz-q2-1" name="q2" ><label id="quiz-q2-1-label" for= "quiz-q2-1"></label> </div><div id="quiz-q2-2-div" class="quiz-div"> <input class="q2" type="radio" id="quiz-q2-2" name="q2" ><label id="quiz-q2-2-label" for= "quiz-q2-2"></label> </div><div id="quiz-q2-3-div" class="quiz-div"><input class="q2" type="radio" id="quiz-q2-3" name="q2" ><label id="quiz-q2-3-label" for= "quiz-q2-3"></label></div>'

            $(document).ready(function(){

                 $('#brain').mapster({
                 fillOpacity: 0.4,               
                         stroke: true,
                         strokeColor: "000000",
                         strokeOpacity: 0.8,
                         strokeWidth: 2,
                         singleSelect: true,
                         mapKey: 'title',
                 wrapClass: 'brain-wrapper',
                 fillColor: 'd42e16',
              
                 onClick: function(e){
                 	  currentRegion = data[e.key]
                 	  backToNormal()
                 	  $("#quiz-questions-div").html(quizQuestionsHTML)
                      $('#quiz-q1-1-label').html(data[e.key].q1_1)
                      $('#quiz-q1-2-label').html(data[e.key].q1_2)
                      $('#quiz-q1-3-label').html(data[e.key].q1_3)
                      $('#quiz-q2-1-label').html(data[e.key].q2_1)
                      $('#quiz-q2-2-label').html(data[e.key].q2_2)
                      $('#quiz-q2-3-label').html(data[e.key].q2_3)
                 },
                 onMouseover: function (e) {
                  //if there is no area that is clicked
                   if  ($('#brain').mapster('get').length == 0){  
                   	  backToNormal()
                   	  currentRegion = data[e.key]
                   	  $("#quiz-questions-div").html(quizQuestionsHTML)
                      $('#quiz-q1-1-label').html(data[e.key].q1_1)
                      $('#quiz-q1-2-label').html(data[e.key].q1_2)
                      $('#quiz-q1-3-label').html(data[e.key].q1_3)
                      $('#quiz-q2-1-label').html(data[e.key].q2_1)
                      $('#quiz-q2-2-label').html(data[e.key].q2_2)
                      $('#quiz-q2-3-label').html(data[e.key].q2_3)
                   }      
                        }})})

            function backToNormal(){
            	$("i").remove()
            	$("#alert-div").html('')
            	$("#alert-div").removeClass()
            	$("#button-div").html('<button id="submit" class="btn btn-info" onclick="showResults()">Submit</button>')
            	$(".quiz-div").each(function(i,div){
            		$(div).css("background-color", "white")
            	})
            	$(".quiz-div input").each(function(i,input){
            		$(input).prop('checked', false)


            	})
            }

            function showResults(){

            	$("i").remove()

            	let score = 0;

            	let q1_answer = currentRegion.q1_ans
            	let q2_answer = currentRegion.q2_ans

            	let q1_correct_id = "#quiz-q1-" + q1_answer
            	let q2_correct_id = "#quiz-q2-" + q2_answer


            	$(".q1").each(function(i,input){

            		let curID = "#" + $(input).attr("id")
            		$(curID+"-div").css("background-color", "white")

            		if (input.checked){

            			if (curID == q1_correct_id){          				
            				$(curID+"-div").css("background-color", "#D4EDDA")
            				$(curID+"-div").prepend('<div class="icon-div"><i class="fas fa-check"></i></div>')
            				score += 1

            			} else{
            				$(curID+"-div").css("background-color", "#F8D7DA")
            				$(curID+"-div").prepend('<div class="icon-div"><i class="fas fa-times"></i></div>')
            			}

            		}
            	})

            	$(".q2").each(function(i,input){
            		let curID = "#" + $(input).attr("id")
            		$(curID+"-div").css("background-color", "white")

            		if (input.checked){

            			if (curID == q2_correct_id){
            				$(curID+"-div").css("background-color", "#D4EDDA")
            				$(curID+"-div").prepend('<div class="icon-div"><i class="fas fa-check"></i></div>')

            				score += 1

            			} else{
            				$(curID+"-div").css("background-color", "#F8D7DA")
            				$(curID+"-div").prepend('<div class="icon-div"><i class="fas fa-times"></i></div>')
            			}

            		}
            	})

            	let alertText = "Score: " + score + "/2"

            	$("#alert-div").hide()

            	$("#alert-div").html("<div id='score' class = 'alert' role='alert'></div>")

            	if (score < 2){
            		$("#alert-div").addClass("alert-danger")
            		if ($("#alert-div").hasClass("alert-success")){
            			$("#alert-div").removeClass("alert-success")
            		}
            		alertText += ". Try again!"
            	} else{
            		$("#alert-div").addClass("alert-success")
            		if ($("#alert-div").hasClass("alert-danger")){
            			$("#alert-div").removeClass("alert-danger")
            		}
            		alertText += ". Nice work!"
            		
            	}

            	$("#score").html(alertText)

            	$("#alert-div").fadeIn()




            }

        </script>

    <div id="quiz-content" class="container-fluid">
	    <div id="brain-div-container">      
	        <div id="title-div">
	          <p id="quiz-title">Click on a brain region to quiz yourself!</p>
	       </div>     
	        <div id="brain-div">   
	            <img id= "brain" class = "img-fluid" src= "{{url_for('static', filename = 'brain-detailed.jpg')}}" usemap="#image-map" alt="brain map" >
	        </div>
	        <div id= "brain-info-div">

	        	<div id="alert-div"></div>

	            <div id="quiz-questions-div"></div>
	              
	             <div id="button-div"> </div>

	             <p id="note">*Once you have selected a region, click on it again (or another region) to deselect it*</p>
	        	  
	        </div>
	    </div>
	</div>
	





{% endblock %}
